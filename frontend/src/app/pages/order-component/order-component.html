<div class="min-h-screen flex flex-col">

  <!-- Header -->
  <app-header [userName]="name" (logoutClick)="logout()"></app-header>



  <!-- Main Content -->
  <div class="flex-1 px-8 py-6">
    <!-- Back Button -->
    <button (click)="goBack()"
            class="mb-6 inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 shadow hover:shadow-lg rounded-full transition-all duration-200 hover:bg-gray-100 font-medium">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
           stroke="currentColor" class="w-5 h-5">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
              d="M15 19l-7-7 7-7"/>
      </svg>
      Back
    </button>

    <h2 class="text-3xl font-extrabold mb-6 text-gray-900">Orders</h2>

    <div class="overflow-x-auto">
      <table class="min-w-full bg-white border border-gray-200 rounded-xl shadow-sm">
        <thead class="bg-gray-100 rounded-t-xl">
          <tr>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Order ID</th>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Customer</th>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Date</th>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Total Amount</th>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders" class="border-b last:border-b-0 hover:shadow-md transition-all rounded-lg">
            <td class="px-6 py-4 font-medium text-gray-800">{{ order.id }}</td>
            <td class="px-6 py-4 text-gray-700">{{ order.customer_name }}</td>
            <td class="px-6 py-4 text-gray-700">{{ order.order_date | date:'short' }}</td>
            <td class="px-6 py-4 font-semibold text-gray-900">â‚±{{ getOrderTotal(order.id) }}</td>
            <td class="px-6 py-4">
              <div class="flex items-center gap-3">
                
                <!-- Colored Status Label -->
                <span 
                  class="px-3 py-1 rounded-full text-xs font-medium"
                  [ngClass]="{
                    'bg-yellow-100 text-yellow-700': order.status === 'Pending',
                    'bg-blue-100 text-blue-700': order.status === 'Processing',
                    'bg-green-100 text-green-700': order.status === 'Delivered',
                    'bg-red-100 text-red-700': order.status === 'Cancelled'
                  }">
                  {{ order.status }}
                </span>

              <!-- Dropdown -->
              <select
                class="px-3 py-1 border rounded-lg text-sm"
                [(ngModel)]="order.status"
                (change)="updateStatus(order.id, order.status)"
                [disabled]="order.status === 'Cancelled'">
                <option value="Pending">Pending</option>
                <option value="Processing">Processing</option>
                <option value="Delivered">Delivered</option>
                <option value="Cancelled">Cancelled</option>
              </select>
              </div>
            </td>

          </tr>
        </tbody>
      </table>
    </div>

  </div>

  <!-- Footer -->
  <app-footer></app-footer>

</div>
